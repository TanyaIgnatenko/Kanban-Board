{"version":3,"sources":["drag-drop/internal/DragDropContext.js","constants.js","drag-drop/DragDropManager.js","helpers/scrollbar.js","helpers/moveTo.js","ducks/board/action-types.js","ducks/board/actions.js","drag-drop/useDraggable.js","components/Card/Card.js","components/AddComponent/AddComponent.js","hooks/uniqueId.js","hooks/onClickOutside.js","drag-drop/useDroppableList.js","helpers/binaryLastIndexOf.js","drag-drop/useDroppable.js","components/CardList/CardList.js","ducks/board/selectors.js","components/Board/Board.js","components/Board/hooks/useBoardStyle.js","App.js","ducks/board/reducer.js","store/rootReducer.js","ducks/board/mocks.js","ducks/board/services.js","ducks/board/saga.js","store/rootSaga.js","store/store.js","index.js"],"names":["DragDropContext","React","createContext","draggedObject","registerDraggable","registerDroppable","DRAGGABLE_TYPE","CARD","LIST","MOVEMENT","BOTTOM","TOP","RIGHT","LEFT","MOUSE_BUTTON","MIDDLE","DragDropManager","state","draggedObjectPosition","hoveredDroppable","droppables","droppable","_this","id","_ref","dragHandleRef","draggable","Object","objectWithoutProperties","handle","current","onPointerDown","event","which","grabPosition","x","clientX","y","clientY","draggedObjectRect","ref","getBoundingClientRect","grabShift","left","top","bindedStartDragIfMove","startDragIfMove","objectSpread","document","addEventListener","resetPreparationToDrag","stopPropagation","removeEventListener","newX","newY","Math","abs","grabDraggable","_ref2","context","type","renderAvatar","onRelease","geometry","width","height","position","movement","dndContext","manageDroppables","setState","moveDraggable","releaseDraggable","movementX","movementY","newPosition","push","scrollIfNedeed","currentDraggedObject","currentHoveredDroppable","draggableContext","droppableContext","onDraggableLeave","findDroppable","draggedNode","node","style","visibility","element","elementFromPoint","closest","acceptedTypes","includes","parentNode","console","warn","setDraggedObjectRef","draggedObjectNode","this","nearestHorizontalScrollbar","elementFromPosition","scrollWidth","clientWidth","findNearestHorizontalScrollbar","scrollBy","clientLeft","nearestVerticalScrollbar","scrollHeight","clientHeight","findNearestVerticalScrollbar","clientTop","_this$draggedObject","lastDroppable","currentDroppable","onDraggableEnter","onDraggableHover","children","props","react_default","a","createElement","Fragment","clientPosition","draggedObjectRef","internal_DragDropContext","Provider","value","Component","moveTo","concat","FETCH_BOARD","REQUEST","SUCCESS","ERROR","MOVE","ADD_CARD","ADD_LIST","fetchBoardSuccess","board","fetchBoardError","error","addCardSuccess","listId","card","addCardError","addListSuccess","boardId","list","addListError","useDraggable","useContext","useEffect","Card","content","setCardRef","moveCardToList","className","renderCard","isDragged","classNames","tabIndex","cardRef","useRef","_ref3","placeholderIndex","defaultProps","mapDispatchToProps","cardId","destinationListId","indexInList","connect","AddComponent","isFormOpened","openCreationFormBtnText","placeholderFormText","submitFormBtnText","onAdd","onFormOpen","onFormClose","formClassName","isUncontrolled","_useState","useState","_useState2","slicedToArray","isCreationMode","setCreationMode","_useState3","_useState4","setContent","handleContentChange","useCallback","target","handleClose","handleAdd","trim","handleOpen","addComponentId","seed","uniqueId","setUniqueId","_","useUniqueId","elementId","onClickOutside","checkClick","useOnClickOutside","formRef","scrollIntoView","hidden","onClick","autoFocus","placeholder","onChange","aria-label","ITEM_TYPE","PLACEHOLDER","REGULAR_ITEM","LIST_TYPE","HORIZONTAL","VERTICAL","formListItems","items","itemToIgnoreId","listItems","map","item","data","filter","splice","enrichWithPlaceholder","useDroppableList","listType","setPlaceholderIndex","placeholderGeometry","setPlaceholderGeometry","_useState5","_useState6","isHoveredByDraggable","setIsHoveredByDraggable","contextRef","itemsRef","draggableCenter","placeholderIdx","array","predicate","leftIdx","rightIdx","length","middleIdx","floor","binaryLastIndexOf","itemRect","extra","_useDroppable","_useContext","droppableClassName","useDroppable","setItemRefAt","idx","CardList","name","cards","addCard","setListRef","moveList","_useDroppableList","listRef","isCardFormOpened","setIsCardFormOpened","renderAddCardComponent","components_AddComponent_AddComponent","bind","renderCardListContent","Boolean","_ITEM_TYPE$REGULAR_IT","defineProperty","key","components_Card_Card","assign","destinationBoardId","newListIdx","selectBoard","Board","background","lists","addList","boardStyle","backgroundStyle","url","color","useMemo","backgroundSize","useBoardStyle","text","components_CardList_CardList","fetchBoard","rest","Board_Board","App","drag_drop_DragDropManager","components_Board_Board","initialState","rootReducer","combineReducers","arguments","undefined","action","cardToMove","updatedLists","found","find","dstList","lastListIdx","findIndex","listToMove","toConsumableArray","mockBoard","toString","fetchBoardRequest","addCardRequest","addListRequest","watchBoardRequests","regenerator_default","wrap","_context","prev","next","call","services","sent","put","t0","stop","_marked","newCardInfo","_context2","_marked2","newListInfo","_context3","_marked3","_context4","all","takeLatest","_marked4","rootSaga","rootSaga_marked","sagaMiddleware","createSagaMiddleware","store","createStore","composeWithDevTools","applyMiddleware","run","ReactDOM","render","es","src_App","getElementById"],"mappings":"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","file":"static/js/main.32e569ed.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst DragDropContext = React.createContext({\r\n  draggedObject: null,\r\n  registerDraggable: () => {},\r\n  registerDroppable: () => {},\r\n});\r\n\r\nexport default DragDropContext;\r\n","const DRAGGABLE_TYPE = {\r\n  CARD: 'CARD',\r\n  LIST: 'LIST',\r\n};\r\n\r\nconst MOVEMENT = {\r\n  BOTTOM: 'BOTTOM',\r\n  TOP: 'TOP',\r\n  RIGHT: 'RIGHT',\r\n  LEFT: 'LEFT',\r\n};\r\n\r\nconst MOUSE_BUTTON = {\r\n  LEFT: 1,\r\n  MIDDLE: 2,\r\n  RIGHT: 3,\r\n};\r\n\r\nexport { DRAGGABLE_TYPE, MOVEMENT, MOUSE_BUTTON };\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport {\r\n  findNearestHorizontalScrollbar,\r\n  findNearestVerticalScrollbar,\r\n} from '../helpers/scrollbar';\r\n\r\nimport DragDropContext from './internal/DragDropContext';\r\nimport { MOUSE_BUTTON, MOVEMENT } from '../constants';\r\n\r\nclass DragDropManager extends React.Component {\r\n  state = {\r\n    draggedObjectPosition: null,\r\n  };\r\n\r\n  draggedObject = null;\r\n  hoveredDroppable = null;\r\n  droppables = {};\r\n\r\n  registerDroppable = droppable => {\r\n    this.droppables[droppable.id] = droppable;\r\n    return () => {};\r\n  };\r\n\r\n  registerDraggable = ({ dragHandleRef, ...draggable }) => {\r\n    const handle = dragHandleRef.current;\r\n\r\n    const onPointerDown = event => {\r\n      const { which: mouseButton } = event;\r\n      if (mouseButton !== MOUSE_BUTTON.LEFT) return;\r\n\r\n      const { clientX, clientY } = event;\r\n      const grabPosition = {\r\n        x: clientX,\r\n        y: clientY,\r\n      };\r\n      const draggedObjectRect = draggable.ref.current.getBoundingClientRect();\r\n      const grabShift = {\r\n        x: draggedObjectRect.left - grabPosition.x,\r\n        y: draggedObjectRect.top - grabPosition.y,\r\n      };\r\n\r\n      this.bindedStartDragIfMove = event =>\r\n        this.startDragIfMove(\r\n          { handle, ...draggable },\r\n          grabPosition,\r\n          grabShift,\r\n          event,\r\n        );\r\n\r\n      document.addEventListener('mousemove', this.bindedStartDragIfMove);\r\n      document.addEventListener('mouseup', this.resetPreparationToDrag);\r\n\r\n      event.stopPropagation();\r\n    };\r\n\r\n    handle.addEventListener('mousedown', onPointerDown);\r\n\r\n    return function unregisterDraggable() {\r\n      handle.removeEventListener('mousedown', onPointerDown);\r\n    };\r\n  };\r\n\r\n  startDragIfMove = (draggable, grabPosition, grabShift, event) => {\r\n    const { clientX: newX, clientY: newY } = event;\r\n\r\n    if (\r\n      Math.abs(newX - grabPosition.x) > 2 ||\r\n      Math.abs(newY - grabPosition.y) > 2\r\n    ) {\r\n      document.removeEventListener('mousemove', this.bindedStartDragIfMove);\r\n      document.removeEventListener('mouseup', this.resetPreparationToDrag);\r\n\r\n      this.grabDraggable({\r\n        grabShift,\r\n        ...draggable,\r\n      });\r\n    }\r\n  };\r\n\r\n  resetPreparationToDrag = () => {\r\n    document.removeEventListener('mousemove', this.bindedStartDragIfMove);\r\n    document.removeEventListener('mouseup', this.resetPreparationToDrag);\r\n  };\r\n\r\n  grabDraggable = ({\r\n    grabShift,\r\n    context,\r\n    type,\r\n    ref,\r\n    handle,\r\n    renderAvatar,\r\n    onRelease,\r\n  }) => {\r\n    const draggedObjectRect = ref.current.getBoundingClientRect();\r\n\r\n    this.draggedObject = {\r\n      context,\r\n      type,\r\n      renderAvatar,\r\n      handle,\r\n      onRelease,\r\n      geometry: {\r\n        width: draggedObjectRect.width,\r\n        height: draggedObjectRect.height,\r\n        grabShift,\r\n      },\r\n      position: {\r\n        x: draggedObjectRect.left,\r\n        y: draggedObjectRect.top,\r\n      },\r\n      movement: [],\r\n    };\r\n\r\n    this.dndContext.draggedObject = this.draggedObject;\r\n\r\n    this.manageDroppables();\r\n\r\n    this.setState(\r\n      {\r\n        draggedObjectPosition: this.draggedObject.position,\r\n      },\r\n      () => {\r\n        document.addEventListener('mousemove', this.moveDraggable);\r\n        document.addEventListener('mouseup', this.releaseDraggable);\r\n      },\r\n    );\r\n  };\r\n\r\n  dndContext = {\r\n    draggedObject: null,\r\n    registerDraggable: this.registerDraggable,\r\n    registerDroppable: this.registerDroppable,\r\n  };\r\n\r\n  moveDraggable = event => {\r\n    const { clientX, clientY } = event;\r\n    const { movementX, movementY } = event;\r\n    const { geometry } = this.draggedObject;\r\n\r\n    const newPosition = {\r\n      x: clientX + geometry.grabShift.x,\r\n      y: clientY + geometry.grabShift.y,\r\n    };\r\n    this.draggedObject.position = newPosition;\r\n\r\n    const movement = [];\r\n    if (movementX) {\r\n      movement.push(movementX > 0 ? MOVEMENT.RIGHT : MOVEMENT.LEFT);\r\n    }\r\n    if (movementY) {\r\n      movement.push(movementY > 0 ? MOVEMENT.BOTTOM : MOVEMENT.TOP);\r\n    }\r\n    this.draggedObject.movement = movement;\r\n\r\n    this.scrollIfNedeed({ x: clientX, y: clientY });\r\n\r\n    this.manageDroppables();\r\n\r\n    this.setState({ draggedObjectPosition: newPosition });\r\n  };\r\n\r\n  scrollIfNedeed(position) {\r\n    const draggedNode = this.draggedObject.node;\r\n    if (draggedNode) {\r\n      draggedNode.style.visibility = 'hidden';\r\n    }\r\n\r\n    const nearestHorizontalScrollbar = findNearestHorizontalScrollbar(position);\r\n\r\n    if (nearestHorizontalScrollbar) {\r\n      if (position.x >= nearestHorizontalScrollbar.clientWidth - 60) {\r\n        nearestHorizontalScrollbar.scrollBy(20, 0);\r\n      } else if (position.x <= nearestHorizontalScrollbar.clientLeft + 60) {\r\n        nearestHorizontalScrollbar.scrollBy(-20, 0);\r\n      }\r\n    }\r\n\r\n    const nearestVerticalScrollbar = findNearestVerticalScrollbar(position);\r\n\r\n    if (nearestVerticalScrollbar) {\r\n      if (position.y >= nearestVerticalScrollbar.clientHeight - 60) {\r\n        nearestVerticalScrollbar.scrollBy(0, 20);\r\n      } else if (position.y <= nearestVerticalScrollbar.clientTop + 60) {\r\n        nearestVerticalScrollbar.scrollBy(0, -20);\r\n      }\r\n    }\r\n    if (draggedNode) {\r\n      draggedNode.style.visibility = 'visible';\r\n    }\r\n  }\r\n\r\n  releaseDraggable = () => {\r\n    const currentDraggedObject = this.draggedObject;\r\n    const currentHoveredDroppable = this.hoveredDroppable;\r\n\r\n    document.removeEventListener('mousemove', this.moveDraggable);\r\n    document.removeEventListener('mouseup', this.releaseDraggable);\r\n\r\n    this.draggedObject = null;\r\n    this.hoveredDroppable = null;\r\n    this.dndContext.draggedObject = null;\r\n    this.setState({\r\n      draggedObjectPosition: null,\r\n    });\r\n\r\n    currentDraggedObject.onRelease({\r\n      draggableContext: currentDraggedObject.context,\r\n      droppableContext: currentHoveredDroppable.context,\r\n    });\r\n    currentHoveredDroppable.onDraggableLeave();\r\n  };\r\n\r\n  manageDroppables() {\r\n    const { position, geometry } = this.draggedObject;\r\n\r\n    const lastDroppable = this.hoveredDroppable;\r\n    const currentDroppable = this.findDroppable({\r\n      x: position.x + geometry.width / 2,\r\n      y: position.y + geometry.height / 2,\r\n    });\r\n\r\n    if (!currentDroppable) return;\r\n\r\n    const droppableChanged =\r\n      !lastDroppable || currentDroppable.id !== lastDroppable.id;\r\n\r\n    if (droppableChanged) {\r\n      if (lastDroppable) {\r\n        lastDroppable.onDraggableLeave();\r\n      }\r\n\r\n      this.hoveredDroppable = this.droppables[currentDroppable.id];\r\n\r\n      this.hoveredDroppable.onDraggableEnter(this.draggedObject);\r\n    }\r\n    this.hoveredDroppable.onDraggableHover(this.draggedObject);\r\n  }\r\n\r\n  findDroppable = position => {\r\n    const draggedNode = this.draggedObject.node;\r\n\r\n    if (draggedNode) {\r\n      draggedNode.style.visibility = 'hidden';\r\n    }\r\n    let element = document.elementFromPoint(position.x, position.y);\r\n    if (draggedNode) {\r\n      draggedNode.style.visibility = 'visible';\r\n    }\r\n\r\n    while (element) {\r\n      const droppable = element.closest('.droppable');\r\n\r\n      if (!droppable) return null;\r\n\r\n      if (!this.droppables[droppable.id]) {\r\n        console.warn('Unregistered droppable with id:', droppable.id);\r\n\r\n        element = droppable.parentNode;\r\n        continue;\r\n      }\r\n\r\n      if (\r\n        this.droppables[droppable.id].acceptedTypes.includes(\r\n          this.draggedObject.type,\r\n        )\r\n      ) {\r\n        return this.droppables[droppable.id];\r\n      }\r\n\r\n      element = droppable.parentNode;\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  setDraggedObjectRef = draggedObjectNode => {\r\n    if (this.draggedObject) {\r\n      this.draggedObject.node = draggedObjectNode;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { children } = this.props;\r\n    const { draggedObjectPosition } = this.state;\r\n    const { draggedObject, dndContext } = this;\r\n\r\n    return (\r\n      <>\r\n        {draggedObject &&\r\n          draggedObject.renderAvatar({\r\n            clientPosition: draggedObjectPosition,\r\n            draggedObjectRef: this.setDraggedObjectRef,\r\n          })}\r\n        <DragDropContext.Provider value={dndContext}>\r\n          {children}\r\n        </DragDropContext.Provider>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nDragDropManager.propTypes = {\r\n  children: PropTypes.any.isRequired,\r\n};\r\n\r\nexport default DragDropManager;\r\n","function hasVerticalScrollbar(element) {\r\n  return element.scrollHeight > element.clientHeight;\r\n}\r\n\r\nfunction hasHorizontalScrollbar(element) {\r\n  return element.scrollWidth > element.clientWidth;\r\n}\r\n\r\nfunction findNearestVerticalScrollbar(position) {\r\n  let elementFromPosition = document.elementFromPoint(position.x, position.y);\r\n  while (elementFromPosition) {\r\n    if (hasVerticalScrollbar(elementFromPosition)) {\r\n      return elementFromPosition;\r\n    }\r\n    elementFromPosition = elementFromPosition.parentNode;\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction findNearestHorizontalScrollbar(position) {\r\n  let elementFromPosition = document.elementFromPoint(position.x, position.y);\r\n  while (elementFromPosition) {\r\n    if (hasHorizontalScrollbar(elementFromPosition)) {\r\n      return elementFromPosition;\r\n    }\r\n    elementFromPosition = elementFromPosition.parentNode;\r\n  }\r\n  return null;\r\n}\r\n\r\nexport {\r\n  hasVerticalScrollbar,\r\n  hasHorizontalScrollbar,\r\n  findNearestVerticalScrollbar,\r\n  findNearestHorizontalScrollbar,\r\n};\r\n","function moveTo({ x, y }) {\n  return {\n    position: 'fixed',\n    left: `${x}px`,\n    top: `${y}px`,\n  };\n}\n\nexport { moveTo };\n","export const FETCH_BOARD = {\r\n  REQUEST: '@@board/FETCH_BOARD_REQUEST',\r\n  SUCCESS: '@@board/FETCH_BOARD_SUCCESS',\r\n  ERROR: '@@board/FETCH_BOARD_ERROR',\r\n};\r\n\r\nexport const MOVE = {\r\n  CARD: '@@board/MOVE_CARD',\r\n  LIST: '@@board/MOVE_LIST',\r\n};\r\n\r\nexport const ADD_CARD = {\r\n  REQUEST: '@@board/ADD_CARD_REQUEST',\r\n  SUCCESS: '@@board/ADD_CARD_SUCCESS',\r\n  ERROR: '@@board/ADD_CARD_ERROR',\r\n};\r\n\r\nexport const ADD_LIST = {\r\n  REQUEST: '@@board/ADD_LIST_REQUEST',\r\n  SUCCESS: '@@board/ADD_LIST_SUCCESS',\r\n  ERROR: '@@board/ADD_LIST_ERROR',\r\n};\r\n","import { ADD_CARD, ADD_LIST, FETCH_BOARD, MOVE } from './action-types';\r\n\r\nexport const fetchBoardRequest = id => {\r\n  return {\r\n    type: FETCH_BOARD.REQUEST,\r\n    id,\r\n  };\r\n};\r\n\r\nexport const fetchBoardSuccess = board => {\r\n  return {\r\n    type: FETCH_BOARD.SUCCESS,\r\n    board,\r\n  };\r\n};\r\n\r\nexport const fetchBoardError = error => {\r\n  return {\r\n    type: FETCH_BOARD.ERROR,\r\n    error,\r\n  };\r\n};\r\n\r\nexport const moveCard = (cardId, destinationListId, indexInList) => {\r\n  return {\r\n    type: MOVE.CARD,\r\n    cardId,\r\n    destinationListId,\r\n    indexInList,\r\n  };\r\n};\r\n\r\nexport const moveList = (listId, destinationBoardId, newListIdx) => {\r\n  return {\r\n    type: MOVE.LIST,\r\n    listId,\r\n    destinationBoardId,\r\n    newListIdx,\r\n  };\r\n};\r\n\r\nexport const addCardRequest = (listId, content) => {\r\n  return {\r\n    type: ADD_CARD.REQUEST,\r\n    listId,\r\n    content,\r\n  };\r\n};\r\n\r\nexport const addCardSuccess = (listId, card) => {\r\n  return {\r\n    type: ADD_CARD.SUCCESS,\r\n    listId,\r\n    card,\r\n  };\r\n};\r\n\r\nexport const addCardError = error => {\r\n  return {\r\n    type: ADD_CARD.ERROR,\r\n    error,\r\n  };\r\n};\r\n\r\nexport const addListRequest = (boardId, content) => {\r\n  return {\r\n    type: ADD_LIST.REQUEST,\r\n    boardId,\r\n    content,\r\n  };\r\n};\r\n\r\nexport const addListSuccess = (boardId, list) => {\r\n  return {\r\n    type: ADD_LIST.SUCCESS,\r\n    boardId,\r\n    list,\r\n  };\r\n};\r\n\r\nexport const addListError = error => {\r\n  return {\r\n    type: ADD_LIST.ERROR,\r\n    error,\r\n  };\r\n};\r\n","import { useContext, useEffect } from 'react';\r\n\r\nimport DragDropContext from './internal/DragDropContext';\r\n\r\nfunction useDraggable(draggable) {\r\n  const { registerDraggable } = useContext(DragDropContext);\r\n\r\n  useEffect(() => {\r\n    const unregisterDraggable = registerDraggable(draggable);\r\n\r\n    return unregisterDraggable;\r\n  }, [\r\n    draggable.context,\r\n    draggable.type,\r\n    draggable.ref,\r\n    draggable.dragHandleRef,\r\n    draggable.renderAvatar,\r\n    draggable.onRelease,\r\n  ]);\r\n}\r\n\r\nexport { useDraggable };\r\n","import React, { useRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport classNames from 'classnames';\r\n\r\nimport { moveTo } from '../../helpers/moveTo';\r\nimport { moveCard } from '../../ducks/board/actions';\r\nimport { useDraggable } from '../../drag-drop/useDraggable';\r\nimport { DRAGGABLE_TYPE } from '../../constants';\r\n\r\nimport './Card.scss';\r\n\r\nfunction Card({ id, content, setCardRef, moveCardToList, className }) {\r\n  const renderCard = (isDragged, clientPosition, ref) => (\r\n    <div\r\n      id={id}\r\n      ref={ref}\r\n      className={classNames('card', isDragged && 'dragged', className)}\r\n      style={isDragged ? moveTo(clientPosition) : {}}\r\n      tabIndex={0}\r\n    >\r\n      <h4 className='card-content'>{content}</h4>\r\n    </div>\r\n  );\r\n\r\n  const cardRef = useRef(null);\r\n  useDraggable({\r\n    context: {\r\n      id,\r\n    },\r\n    type: DRAGGABLE_TYPE.CARD,\r\n    ref: cardRef,\r\n    dragHandleRef: cardRef,\r\n    renderAvatar: ({ clientPosition, draggedObjectRef }) =>\r\n      renderCard(true, clientPosition, draggedObjectRef),\r\n    onRelease: ({ draggableContext, droppableContext }) => {\r\n      moveCardToList(\r\n        draggableContext.id,\r\n        droppableContext.id,\r\n        droppableContext.placeholderIndex,\r\n      );\r\n    },\r\n  });\r\n\r\n  const setRefs = node => {\r\n    setCardRef(node);\r\n    cardRef.current = node;\r\n  };\r\n\r\n  return renderCard(false, null, setRefs);\r\n}\r\n\r\nCard.propTypes = {\r\n  id: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\r\n  content: PropTypes.any.isRequired,\r\n  setCardRef: PropTypes.func.isRequired,\r\n  moveCardToList: PropTypes.func.isRequired,\r\n  className: PropTypes.string,\r\n};\r\n\r\nCard.defaultProps = {\r\n  className: '',\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  moveCardToList: moveCard,\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps,\r\n)(Card);\r\n","import React, { useEffect, useState, useCallback, useRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport { useUniqueId } from '../../hooks/uniqueId';\r\nimport { useOnClickOutside } from '../../hooks/onClickOutside';\r\n\r\nimport './AddComponent.scss';\r\nimport _ from 'lodash';\r\n\r\nfunction AddComponent({\r\n  isFormOpened,\r\n  openCreationFormBtnText,\r\n  placeholderFormText,\r\n  submitFormBtnText,\r\n  onAdd,\r\n  onFormOpen,\r\n  onFormClose,\r\n  className,\r\n  formClassName,\r\n  style,\r\n}) {\r\n  const isUncontrolled = useRef(isFormOpened === null);\r\n  const [isCreationMode, setCreationMode] = useState(false);\r\n\r\n  const [content, setContent] = useState('');\r\n  const handleContentChange = useCallback(event => {\r\n    const content = event.target.value;\r\n    setContent(content);\r\n  }, []);\r\n\r\n  const handleClose = useCallback(() => {\r\n    setContent('');\r\n    if (isUncontrolled) {\r\n      setCreationMode(false);\r\n    }\r\n    onFormClose();\r\n  }, []);\r\n\r\n  const handleAdd = useCallback(() => {\r\n    if (!content.trim()) return;\r\n\r\n    onAdd(content);\r\n    handleClose();\r\n  }, [content, handleClose, onAdd]);\r\n\r\n  const handleOpen = useCallback(() => {\r\n    if (isUncontrolled) {\r\n      setCreationMode(true);\r\n    }\r\n    onFormOpen();\r\n  }, []);\r\n\r\n  const addComponentId = useUniqueId('add-component');\r\n  const handleWasClickOutside = useCallback(() => {\r\n    if (isUncontrolled) {\r\n      setCreationMode(false);\r\n    }\r\n    onFormClose();\r\n  }, []);\r\n  useOnClickOutside(addComponentId, handleWasClickOutside);\r\n\r\n  const formRef = useRef(null);\r\n  useEffect(() => {\r\n    if (isCreationMode) {\r\n      formRef.current.scrollIntoView(true);\r\n    }\r\n  }, [isCreationMode]);\r\n\r\n  return (\r\n    <div\r\n      id={addComponentId}\r\n      className={classNames('add-component-wrapper', className)}\r\n      style={style}\r\n    >\r\n      <button\r\n        className={classNames('open-form-btn', {\r\n          hidden:\r\n            (isUncontrolled.current && isCreationMode) ||\r\n            (!isUncontrolled.current && isFormOpened),\r\n        })}\r\n        onClick={handleOpen}\r\n      >\r\n        <h4>{openCreationFormBtnText}</h4>\r\n      </button>\r\n      <div\r\n        ref={node => (formRef.current = node)}\r\n        className={classNames('form', formClassName, {\r\n          hidden:\r\n            (isUncontrolled.current && !isCreationMode) ||\r\n            (!isUncontrolled.current && !isFormOpened),\r\n        })}\r\n      >\r\n        <textarea\r\n          autoFocus\r\n          className='content'\r\n          value={content}\r\n          placeholder={placeholderFormText}\r\n          onChange={handleContentChange}\r\n        />\r\n        <div className='form-controls'>\r\n          <button className='add-btn' onClick={handleAdd}>\r\n            {submitFormBtnText}\r\n          </button>\r\n          <button\r\n            aria-label='close'\r\n            className='close-btn'\r\n            onClick={handleClose}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nAddComponent.propTypes = {\r\n  isFormOpened: PropTypes.bool,\r\n  openCreationFormBtnText: PropTypes.string.isRequired,\r\n  placeholderFormText: PropTypes.string.isRequired,\r\n  submitFormBtnText: PropTypes.string.isRequired,\r\n  onAdd: PropTypes.func.isRequired,\r\n  onFormOpen: PropTypes.func,\r\n  onFormClose: PropTypes.func,\r\n  formClassName: PropTypes.string,\r\n  className: PropTypes.string,\r\n};\r\n\r\nAddComponent.defaultProps = {\r\n  isFormOpened: null,\r\n  className: '',\r\n  formClassName: '',\r\n  onFormOpen: () => {},\r\n  onFormClose: () => {},\r\n};\r\n\r\nexport default AddComponent;\r\n","import { useState, useEffect } from 'react';\r\nimport _ from 'lodash';\r\n\r\nexport function useUniqueId(seed) {\r\n  const [uniqueId, setUniqueId] = useState(null);\r\n  useEffect(() => {\r\n    setUniqueId(_.uniqueId(seed));\r\n  }, [seed]);\r\n  return uniqueId;\r\n}\r\n","import { useCallback, useEffect } from 'react';\r\n\r\nexport function useOnClickOutside(elementId, onClickOutside) {\r\n  const checkClick = useCallback(\r\n    event => {\r\n      const wasClickOutside = !event.target.closest(`#${elementId}`);\r\n\r\n      if (wasClickOutside) {\r\n        onClickOutside();\r\n      }\r\n    },\r\n    [elementId, onClickOutside],\r\n  );\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('pointerdown', checkClick);\r\n\r\n    return function cleanup() {\r\n      document.removeEventListener('pointerdown', checkClick);\r\n    };\r\n  }, [checkClick]);\r\n}\r\n","import { useRef, useCallback, useState } from 'react';\r\n\r\nimport { useDroppable } from './useDroppable';\r\nimport { binaryLastIndexOf } from '../helpers/binaryLastIndexOf';\r\n\r\nconst ITEM_TYPE = {\r\n  PLACEHOLDER: 'PLACEHOLDER',\r\n  REGULAR_ITEM: 'REGULAR_ITEM',\r\n};\r\n\r\nconst LIST_TYPE = {\r\n  HORIZONTAL: 'HORIZONTAL',\r\n  VERTICAL: 'VERTICAL',\r\n};\r\n\r\nfunction formListItems(items, itemToIgnoreId, placeholder) {\r\n  let listItems = items\r\n    ? items.map(item => ({\r\n        type: ITEM_TYPE.REGULAR_ITEM,\r\n        data: item,\r\n      }))\r\n    : [];\r\n\r\n  const shouldIgnoreItem = itemToIgnoreId !== null;\r\n  if (shouldIgnoreItem) {\r\n    listItems = listItems.filter(item => item.data.id !== itemToIgnoreId);\r\n  }\r\n\r\n  const shouldShowPlaceholder = placeholder.placeholderIndex !== null;\r\n  if (shouldShowPlaceholder) {\r\n    listItems = enrichWithPlaceholder(listItems, placeholder);\r\n  }\r\n\r\n  return listItems;\r\n}\r\n\r\nfunction enrichWithPlaceholder(listItems, placeholder) {\r\n  listItems.splice(placeholder.placeholderIndex, 0, {\r\n    type: ITEM_TYPE.PLACEHOLDER,\r\n    placeholderIndex: placeholder.placeholderIndex,\r\n    geometry: placeholder.geometry,\r\n  });\r\n  return listItems;\r\n}\r\n\r\nfunction useDroppableList({ id, acceptedTypes, listType, items }) {\r\n  const [placeholderIndex, setPlaceholderIndex] = useState(null);\r\n  const [placeholderGeometry, setPlaceholderGeometry] = useState(null);\r\n  const [isHoveredByDraggable, setIsHoveredByDraggable] = useState(false);\r\n\r\n  const contextRef = useRef({ id, placeholderIndex: null });\r\n  const itemsRef = useRef([]);\r\n\r\n  const setItemRefAt = (item, idx) => {\r\n    if (!item) return;\r\n\r\n    itemsRef.current[idx] = item;\r\n  };\r\n\r\n  const onDraggableEnter = useCallback(draggable => {\r\n    setIsHoveredByDraggable(true);\r\n    setPlaceholderGeometry({\r\n      width: draggable.geometry.width,\r\n      height: draggable.geometry.height,\r\n    });\r\n  }, []);\r\n\r\n  const onDraggableHover = useCallback(\r\n    draggable => {\r\n      const draggableCenter = {\r\n        x: draggable.position.x + draggable.geometry.width / 2,\r\n        y: draggable.position.y + draggable.geometry.height / 2,\r\n      };\r\n\r\n      let placeholderIdx = binaryLastIndexOf(itemsRef.current, item => {\r\n        const itemRect = item.getBoundingClientRect();\r\n\r\n        switch (listType) {\r\n          case LIST_TYPE.HORIZONTAL: {\r\n            let extra = 0;\r\n            if (itemRect.width > draggable.geometry.width) {\r\n              // to avoid placeholder and bigger than it card swap back and forth\r\n              extra = itemRect.width - draggable.geometry.width;\r\n            }\r\n            return itemRect.left + extra < draggableCenter.x;\r\n          }\r\n          case LIST_TYPE.VERTICAL: {\r\n            let extra = 0;\r\n            if (itemRect.height > draggable.geometry.height) {\r\n              // to avoid placeholder and bigger than it card swap back and forth\r\n              extra = itemRect.height - draggable.geometry.height;\r\n            }\r\n            return itemRect.top + extra < draggableCenter.y;\r\n          }\r\n          default: {\r\n            console.error('Uknown list type:', listType);\r\n          }\r\n        }\r\n      });\r\n\r\n      placeholderIdx = placeholderIdx !== null ? placeholderIdx : 0;\r\n\r\n      contextRef.current.placeholderIndex = placeholderIdx;\r\n      setPlaceholderIndex(placeholderIdx);\r\n    },\r\n    [placeholderIndex, listType],\r\n  );\r\n\r\n  const onDraggableLeave = useCallback(() => {\r\n    setIsHoveredByDraggable(false);\r\n    setPlaceholderGeometry(null);\r\n    setPlaceholderIndex(null);\r\n    contextRef.current.placeholderIndex = null;\r\n  }, []);\r\n\r\n  const { draggableContext, droppableClassName } = useDroppable({\r\n    id,\r\n    context: contextRef.current,\r\n    acceptedTypes,\r\n    onDraggableEnter,\r\n    onDraggableHover,\r\n    onDraggableLeave,\r\n  });\r\n\r\n  const placeholder = {\r\n    placeholderIndex,\r\n    geometry: placeholderGeometry,\r\n  };\r\n  const itemToIgnoreId = draggableContext && draggableContext.id;\r\n  const listItems = formListItems(items, itemToIgnoreId, placeholder);\r\n\r\n  return {\r\n    listItems,\r\n    setItemRefAt,\r\n    droppableClassName,\r\n    isHoveredByDraggable,\r\n  };\r\n}\r\n\r\nexport { useDroppableList, ITEM_TYPE, LIST_TYPE };\r\n","function binaryLastIndexOf(array, predicate) {\r\n  let leftIdx = 0,\r\n    rightIdx = array.length - 1;\r\n\r\n  while (leftIdx <= rightIdx) {\r\n    const middleIdx = Math.floor((leftIdx + rightIdx) / 2);\r\n\r\n    if (predicate(array[middleIdx])) {\r\n      leftIdx = middleIdx + 1;\r\n    } else {\r\n      rightIdx = middleIdx - 1;\r\n    }\r\n  }\r\n\r\n  return rightIdx !== -1 ? rightIdx : null;\r\n}\r\n\r\nexport { binaryLastIndexOf };\r\n","import { useEffect, useContext } from 'react';\r\n\r\nimport DragDropContext from './internal/DragDropContext';\r\n\r\nfunction useDroppable(droppable) {\r\n  const { draggedObject, registerDroppable } = useContext(DragDropContext);\r\n\r\n  useEffect(() => {\r\n    const unregisterDroppable = registerDroppable(droppable);\r\n\r\n    return unregisterDroppable;\r\n  }, [\r\n    droppable.id,\r\n    droppable.context,\r\n    droppable.acceptedTypes,\r\n    droppable.onDraggableEnter,\r\n    droppable.onDraggableHover,\r\n    droppable.onDraggableLeave,\r\n  ]);\r\n\r\n  return {\r\n    draggableContext: draggedObject && draggedObject.context,\r\n    droppableClassName: 'droppable',\r\n  };\r\n}\r\n\r\nexport { useDroppable };\r\n","import React, { useState, useRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport classNames from 'classnames';\r\n\r\nimport { Card } from '../Card';\r\nimport { AddComponent } from '../AddComponent';\r\nimport { addCardRequest, moveList } from '../../ducks/board/actions';\r\nimport { useDraggable } from '../../drag-drop/useDraggable';\r\nimport { DRAGGABLE_TYPE } from '../../constants';\r\nimport { moveTo } from '../../helpers/moveTo';\r\n\r\nimport {\r\n  ITEM_TYPE,\r\n  LIST_TYPE,\r\n  useDroppableList,\r\n} from '../../drag-drop/useDroppableList';\r\n\r\nimport './CardList.scss';\r\n\r\nfunction CardList({\r\n  id,\r\n  name,\r\n  cards,\r\n  addCard,\r\n  setListRef,\r\n  moveList,\r\n  className,\r\n}) {\r\n  const { setItemRefAt, listItems, droppableClassName } = useDroppableList({\r\n    id,\r\n    listType: LIST_TYPE.VERTICAL,\r\n    acceptedTypes: [DRAGGABLE_TYPE.CARD],\r\n    items: cards,\r\n  });\r\n\r\n  const dragHandleRef = useRef(null);\r\n  const listRef = useRef(null);\r\n\r\n  const [isCardFormOpened, setIsCardFormOpened] = useState(false);\r\n\r\n  const renderAddCardComponent = () => (\r\n    <AddComponent\r\n      isFormOpened={isCardFormOpened}\r\n      formClassName='card-form'\r\n      openCreationFormBtnText='Добавить ещё одну карточку'\r\n      placeholderFormText='Введите название карточки'\r\n      submitFormBtnText='Добавить карточку'\r\n      onFormOpen={() => setIsCardFormOpened(true)}\r\n      onFormClose={() => setIsCardFormOpened(false)}\r\n      onAdd={addCard.bind(null, id)}\r\n    />\r\n  );\r\n\r\n  const renderCardListContent = () => (\r\n    <>\r\n      <header ref={dragHandleRef}>\r\n        <h2 className='list-title'>{name}</h2>\r\n      </header>\r\n      {(Boolean(listItems.length) || isCardFormOpened) && (\r\n        <ul className='list-cards'>\r\n          {listItems.map(\r\n            (item, idx) =>\r\n              ({\r\n                [ITEM_TYPE.REGULAR_ITEM]: (\r\n                  <li key={item.data && item.data.id}>\r\n                    <Card\r\n                      {...item.data}\r\n                      className='list-card'\r\n                      setCardRef={node => setItemRefAt(node, idx)}\r\n                    />\r\n                  </li>\r\n                ),\r\n                [ITEM_TYPE.PLACEHOLDER]: (\r\n                  <li key='placeholder'>\r\n                    <div\r\n                      ref={node => setItemRefAt(node, idx)}\r\n                      className='placeholder list-card'\r\n                      style={{\r\n                        width: item.geometry && item.geometry.width,\r\n                        height: item.geometry && item.geometry.height,\r\n                      }}\r\n                    />\r\n                  </li>\r\n                ),\r\n              }[item.type]),\r\n          )}\r\n          {isCardFormOpened && renderAddCardComponent()}\r\n        </ul>\r\n      )}\r\n      <footer>{!isCardFormOpened && renderAddCardComponent()}</footer>\r\n    </>\r\n  );\r\n\r\n  useDraggable({\r\n    context: {\r\n      id,\r\n    },\r\n    type: DRAGGABLE_TYPE.LIST,\r\n    ref: listRef,\r\n    dragHandleRef,\r\n    renderAvatar: ({ clientPosition, draggedObjectRef }) => (\r\n      <div\r\n        id={id}\r\n        ref={draggedObjectRef}\r\n        className={classNames('card-list', 'dragged', className)}\r\n        style={moveTo(clientPosition)}\r\n      >\r\n        {renderCardListContent()}\r\n      </div>\r\n    ),\r\n    onRelease: ({ draggableContext, droppableContext }) => {\r\n      moveList(\r\n        draggableContext.id,\r\n        droppableContext.id,\r\n        droppableContext.placeholderIndex,\r\n      );\r\n    },\r\n  });\r\n\r\n  const setRefs = node => {\r\n    setListRef(node);\r\n    listRef.current = node;\r\n  };\r\n\r\n  return (\r\n    <div id={id} className={classNames(droppableClassName, className)}>\r\n      <div id={id} ref={setRefs} className='card-list' tabIndex={0}>\r\n        {renderCardListContent()}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nCardList.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  addCard: PropTypes.func.isRequired,\r\n  moveList: PropTypes.func.isRequired,\r\n  setListRef: PropTypes.func.isRequired,\r\n  className: PropTypes.string,\r\n  cards: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n      content: PropTypes.string.isRequired,\r\n    }),\r\n  ).isRequired,\r\n};\r\n\r\nCardList.defaultProps = {\r\n  className: '',\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  addCard: addCardRequest,\r\n  moveList,\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps,\r\n)(CardList);\r\n","export const selectBoard = state => state.board.board;\n","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport classNames from 'classnames';\r\n\r\nimport { CardList } from '../CardList';\r\nimport { AddComponent } from '../AddComponent';\r\nimport { useBoardStyle } from './hooks/useBoardStyle';\r\nimport { selectBoard } from '../../ducks/board/selectors';\r\nimport { addListRequest, fetchBoardRequest } from '../../ducks/board/actions';\r\nimport { DRAGGABLE_TYPE } from '../../constants';\r\n\r\nimport {\r\n  ITEM_TYPE,\r\n  LIST_TYPE,\r\n  useDroppableList,\r\n} from '../../drag-drop/useDroppableList';\r\n\r\nimport './Board.scss';\r\n\r\nfunction Board({ id, background, name, lists, addList }) {\r\n  const boardStyle = useBoardStyle(background);\r\n\r\n  const { setItemRefAt, listItems, droppableClassName } = useDroppableList({\r\n    id,\r\n    listType: LIST_TYPE.HORIZONTAL,\r\n    acceptedTypes: [DRAGGABLE_TYPE.LIST],\r\n    items: lists,\r\n  });\r\n\r\n  return (\r\n    <div\r\n      id={id}\r\n      className={classNames('board', droppableClassName)}\r\n      style={boardStyle}\r\n    >\r\n      <h1 className='board-title' style={{ color: name.color }}>\r\n        {name.text}\r\n      </h1>\r\n      <ul className='board-lists'>\r\n        {listItems.map(\r\n          (item, idx) =>\r\n            ({\r\n              [ITEM_TYPE.REGULAR_ITEM]: (\r\n                <li key={item.data && item.data.id}>\r\n                  <CardList\r\n                    className='board-list-zone'\r\n                    setListRef={node => setItemRefAt(node, idx)}\r\n                    {...item.data}\r\n                  />\r\n                </li>\r\n              ),\r\n              [ITEM_TYPE.PLACEHOLDER]: (\r\n                <li key='placeholder'>\r\n                  <div\r\n                    ref={node => setItemRefAt(node, idx)}\r\n                    className='placeholder board-list-zone'\r\n                    style={{\r\n                      width: item.geometry && item.geometry.width,\r\n                      height: item.geometry && item.geometry.height,\r\n                    }}\r\n                  />\r\n                </li>\r\n              ),\r\n            }[item.type]),\r\n        )}\r\n        <AddComponent\r\n          className='add-list-wrapper'\r\n          formClassName='add-list-form'\r\n          openCreationFormBtnText='Добавить ещё одну колонку'\r\n          placeholderFormText='Введите название колонки'\r\n          submitFormBtnText='Добавить колонку'\r\n          onAdd={addList.bind(null, id)}\r\n        />\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction BoardContainer({ id, board, fetchBoard, addList, ...rest }) {\r\n  useEffect(() => {\r\n    fetchBoard(id);\r\n  }, [fetchBoard, id]);\r\n\r\n  return board && <Board addList={addList} {...board} {...rest} />;\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  board: selectBoard(state),\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  fetchBoard: fetchBoardRequest,\r\n  addList: addListRequest,\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(BoardContainer);\r\n","import { useMemo } from 'react';\r\n\r\nfunction useBoardStyle(background) {\r\n  const backgroundStyle =\r\n    background.type === 'img'\r\n      ? `url(${background.url}) no-repeat`\r\n      : background.color;\r\n\r\n  const boardStyle = useMemo(\r\n    () => ({\r\n      background: backgroundStyle,\r\n      backgroundSize: 'cover',\r\n    }),\r\n    [backgroundStyle],\r\n  );\r\n  return boardStyle;\r\n}\r\n\r\nexport { useBoardStyle };\r\n","import React from 'react';\n\nimport DragDropManager from './drag-drop/DragDropManager';\nimport { BoardContainer } from './components/Board';\n\nfunction App() {\n  return (\n    <DragDropManager>\n      <BoardContainer id={0} />\n    </DragDropManager>\n  );\n}\n\nexport default App;\n","import { ADD_CARD, ADD_LIST, FETCH_BOARD, MOVE } from './action-types';\r\n\r\nconst initialState = {\r\n  board: null,\r\n};\r\n\r\nexport const board = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case FETCH_BOARD.SUCCESS: {\r\n      return {\r\n        ...state,\r\n        board: action.board,\r\n      };\r\n    }\r\n    case MOVE.CARD: {\r\n      const { cardId, destinationListId, indexInList } = action;\r\n\r\n      let cardToMove = null;\r\n      const updatedLists = state.board.lists.map(list => {\r\n        const found = list.cards.find(item => item.id === cardId);\r\n        if (found) {\r\n          cardToMove = found;\r\n          return {\r\n            ...list,\r\n            cards: list.cards.filter(item => item.id !== cardId),\r\n          };\r\n        }\r\n        return list;\r\n      });\r\n\r\n      if (cardToMove) {\r\n        const dstList = updatedLists.find(\r\n          list => list.id === destinationListId,\r\n        );\r\n        if (dstList) {\r\n          dstList.cards.splice(indexInList, 0, cardToMove);\r\n        } else {\r\n          console.error('List with id', destinationListId, 'not found');\r\n        }\r\n      } else {\r\n        console.error('List containing card with id', cardId, 'not found');\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        board: {\r\n          ...state.board,\r\n          lists: updatedLists,\r\n        },\r\n      };\r\n    }\r\n    case MOVE.LIST: {\r\n      const { listId, destinationBoardId, newListIdx } = action;\r\n\r\n      if (state.board.id !== destinationBoardId) {\r\n        console.error('Destination board id does not match current board id');\r\n      }\r\n\r\n      const lastListIdx = state.board.lists.findIndex(\r\n        list => list.id === listId,\r\n      );\r\n      if (newListIdx === lastListIdx) {\r\n        return state;\r\n      }\r\n\r\n      const listToMove = state.board.lists[lastListIdx];\r\n      const updatedLists = [...state.board.lists];\r\n\r\n      updatedLists.splice(lastListIdx, 1);\r\n      updatedLists.splice(newListIdx, 0, listToMove);\r\n\r\n      return {\r\n        ...state,\r\n        board: {\r\n          ...state.board,\r\n          lists: updatedLists,\r\n        },\r\n      };\r\n    }\r\n    case ADD_CARD.SUCCESS: {\r\n      const { listId, card } = action;\r\n\r\n      const updatedLists = state.board.lists.map(list =>\r\n        list.id === listId\r\n          ? {\r\n              ...list,\r\n              cards: list.cards.push(card),\r\n            }\r\n          : list,\r\n      );\r\n\r\n      return {\r\n        ...state,\r\n        board: {\r\n          ...state.board,\r\n          lists: updatedLists,\r\n        },\r\n      };\r\n    }\r\n\r\n    case ADD_LIST.SUCCESS: {\r\n      const { boardId, list } = action;\r\n\r\n      if (state.board.id !== boardId) {\r\n        console.error('Board id does not match current board id');\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        board: {\r\n          ...state.board,\r\n          lists: state.board.lists.push(list),\r\n        },\r\n      };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from 'redux';\r\n// import { createBrowserHistory } from 'history';\r\n// import { connectRouter } from 'connected-react-router';\r\n\r\nimport { board } from '../ducks/board/reducer';\r\n\r\n// const history = createBrowserHistory();\r\n\r\nconst rootReducer = combineReducers({\r\n  // router: connectRouter(history),\r\n  board,\r\n});\r\n\r\nexport { rootReducer };\r\n","let id = 0;\r\n\r\nexport const mockBoard = {\r\n  id: (id++).toString(),\r\n  name: {\r\n    text: 'Проект «Канбан Доска»',\r\n    color: 'white',\r\n  },\r\n  background: {\r\n    type: 'img',\r\n    color: 'rgba(252,223,161,0.91)',\r\n    url:\r\n      'https://cdn.dribbble.com/users/58661/screenshots/1818073/csc_pattern.png',\r\n  },\r\n  lists: [\r\n    {\r\n      id: (id++).toString(),\r\n      name: 'TO DO',\r\n      cards: [\r\n        {\r\n          id: (id++).toString(),\r\n          content: 'Сделать бэкенд на node.js',\r\n        },\r\n        {\r\n          id: (id++).toString(),\r\n          content:\r\n            'Сделать реалистичную анимацию захвата карточки\\n' +\r\n            '( в зависимости от места захвата поворачивать карточку на разный угол, ' +\r\n            'при падении карточки плавно анимировать её разворот в исходное положение :))\\n',\r\n        },\r\n        {\r\n          id: (id++).toString(),\r\n          content: 'Добавить возможность редактировать карточки / колонки',\r\n        },\r\n        {\r\n          id: (id++).toString(),\r\n          content: 'Добавить возможность удалять карточки / колонки',\r\n        },\r\n      ],\r\n    },\r\n    {\r\n      id: (id++).toString(),\r\n      name: 'IN PROGRESS',\r\n      cards: [\r\n        {\r\n          id: (id++).toString(),\r\n          content:\r\n            'Сделать функцию перемещения доступной и на мобильных устройствах',\r\n        },\r\n\r\n        {\r\n          id: (id++).toString(),\r\n          content: 'После проста клика не инцииировать перемещение',\r\n        },\r\n        {\r\n          id: (id++).toString(),\r\n          content:\r\n            'По правому и среднему клику мыши не инициировать перемещение',\r\n        },\r\n        {\r\n          id: (id++).toString(),\r\n          content: 'Выделять плейсхолдер для перетаскиваемой колонки цветом',\r\n        },\r\n      ],\r\n    },\r\n    {\r\n      id: (id++).toString(),\r\n      name: 'DONE',\r\n      cards: [\r\n        {\r\n          id: (id++).toString(),\r\n          content: 'Добавить возможность перетаскивать карточки',\r\n        },\r\n        {\r\n          id: (id++).toString(),\r\n          content: 'Добавить возможность перетаскивать колонки',\r\n        },\r\n        {\r\n          id: (id++).toString(),\r\n          content: 'Добавить возможность создавать новые карточки',\r\n        },\r\n        {\r\n          id: (id++).toString(),\r\n          content: 'Добавить возможность создавать новые колонки',\r\n        },\r\n        {\r\n          id: (id++).toString(),\r\n          content: 'Гибкая drag drop system',\r\n        },\r\n        {\r\n          id: (id++).toString(),\r\n          content:\r\n            'Позволить droppable объекту иметь несколько accepted draggable types',\r\n        },\r\n        {\r\n          id: (id++).toString(),\r\n          content:\r\n            'Устранить мельтешение карточки с мешьшим по размеру плейсхолдером',\r\n        },\r\n        {\r\n          id: (id++).toString(),\r\n          content: 'Позволить перетаскиваемому объекту сдвигать скроллбар',\r\n        },\r\n        {\r\n          id: (id++).toString(),\r\n          content: 'Устранить text overflow проблему',\r\n        },\r\n        {\r\n          id: (id++).toString(),\r\n          content:\r\n            'При открытии формы создания новой карточки передвигать её в зону видимости',\r\n        },\r\n        {\r\n          id: (id++).toString(),\r\n          content: 'Сделать карточки и листы доступными для клавиатуры',\r\n        },\r\n        {\r\n          id: (id++).toString(),\r\n          content:\r\n            'Запретить создание пустых или наполненных только пробелами и переносами строк карточек/колонок',\r\n        },\r\n      ],\r\n    },\r\n    {\r\n      id: (id++).toString(),\r\n      name: 'RETROSPECTIVE',\r\n      cards: [],\r\n    },\r\n  ],\r\n};\r\n","import _ from 'lodash';\r\n\r\nimport { mockBoard } from './mocks';\r\n\r\n/**\r\n * This file is going to send requests to server and return server responses in the future\r\n */\r\nexport function fetchBoardRequest(id) {\r\n  return mockBoard;\r\n}\r\n\r\nexport function addCardRequest(listId, content) {\r\n  const newCard = {\r\n    id: _.uniqueId('card'),\r\n    content,\r\n  };\r\n  return { listId, card: newCard };\r\n}\r\n\r\nexport function addListRequest(boardId, content) {\r\n  const newList = {\r\n    id: _.uniqueId('list'),\r\n    name: content,\r\n    cards: [],\r\n  };\r\n  return { boardId, list: newList };\r\n}","import { all, call, put, takeLatest } from 'redux-saga/effects';\r\n\r\nimport {\r\n  addCardError,\r\n  addCardSuccess,\r\n  addListError,\r\n  addListSuccess,\r\n  fetchBoardError,\r\n  fetchBoardSuccess,\r\n} from './actions';\r\n\r\nimport { ADD_CARD, ADD_LIST, FETCH_BOARD } from './action-types';\r\n\r\nimport * as services from './services';\r\n\r\nfunction* fetchBoard({ id }) {\r\n  try {\r\n    const board = yield call(services.fetchBoardRequest, id);\r\n    yield put(fetchBoardSuccess(board));\r\n  } catch (error) {\r\n    yield put(fetchBoardError(error));\r\n  }\r\n}\r\n\r\nfunction* addCard({ listId, content }) {\r\n  try {\r\n    const newCardInfo = yield call(services.addCardRequest, listId, content);\r\n    yield put(addCardSuccess(newCardInfo.listId, newCardInfo.card));\r\n  } catch (error) {\r\n    yield put(addCardError(error));\r\n  }\r\n}\r\n\r\nfunction* addList({ boardId, content }) {\r\n  try {\r\n    const newListInfo = yield call(services.addListRequest, boardId, content);\r\n    yield put(addListSuccess(newListInfo.boardId, newListInfo.list));\r\n  } catch (error) {\r\n    yield put(addListError(error));\r\n  }\r\n}\r\n\r\nexport function* watchBoardRequests() {\r\n  yield all([\r\n    takeLatest(FETCH_BOARD.REQUEST, fetchBoard),\r\n    takeLatest(ADD_CARD.REQUEST, addCard),\r\n    takeLatest(ADD_LIST.REQUEST, addList),\r\n  ]);\r\n}\r\n","import { all, call } from 'redux-saga/effects';\r\nimport { watchBoardRequests } from '../ducks/board/saga';\r\n\r\nexport default function* rootSaga() {\r\n  yield all([call(watchBoardRequests)]);\r\n}\r\n","import createSagaMiddleware from 'redux-saga';\r\n\r\nimport { applyMiddleware, createStore } from 'redux';\r\n// import { routerMiddleware } from 'connected-react-router';\r\n\r\nimport { composeWithDevTools } from 'redux-devtools-extension/developmentOnly';\r\nimport { rootReducer } from './rootReducer';\r\nimport rootSaga from './rootSaga';\r\n\r\n// const navigationMiddleware = routerMiddleware(history);\r\nconst sagaMiddleware = createSagaMiddleware();\r\nconst initialState = {};\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  initialState,\r\n  composeWithDevTools(applyMiddleware(sagaMiddleware)),\r\n);\r\n\r\nsagaMiddleware.run(rootSaga);\r\n\r\nexport { store };\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport App from './App';\nimport { store } from './store/store';\n\nimport './assets/scss/reset.scss';\nimport './index.css';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}